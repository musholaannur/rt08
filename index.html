<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Laporan Infaq Digital - Musholla Wakaf Annur</title>

<script src="https://cdn.tailwindcss.com"></script>

<style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap');

body { 
    font-family: 'Inter', sans-serif; 
    background:#f8fafc; 
    color:#0f172a; 
    overflow-x: hidden; 
}

/* STRUKTUR TAKMIR */
.struktur-wrapper {
    background: linear-gradient(135deg,#3b82f6 0%,#2563eb 100%);
    padding:30px 15px;
}
.struktur-container {
    max-width:1000px;
    margin:auto;
    background:#fff;
    padding:30px;
    border:5px solid #2563eb;
    box-shadow:0 0 10px rgba(0,0,0,0.2);
    text-align:center;
    border-radius:20px;
}
.box {
    border:2px solid #10b981;
    padding:12px;
    margin:10px;
    display:inline-block;
    min-width:180px;
    background:#ecfdf5;
    color:#065f46;
    font-weight:700;
    border-radius:12px;
    box-shadow:0 4px 10px rgba(16,185,129,0.25);
}
.flex-box {
    display:flex;
    justify-content:center;
    flex-wrap:wrap;
    gap:20px;
}
.section-row {
    display:flex;
    justify-content:center;
    flex-wrap:wrap;
    gap:20px;
    margin-top:20px;
}

/* SALDO */
.gradient-blue { 
    background: linear-gradient(135deg,#3b82f6 0%,#2563eb 100%); 
}
.shadow-custom { 
    box-shadow:0 10px 30px -5px rgba(0,0,0,0.05);
}

/* ====== PERTEBAL RIWAYAT MUTASI ====== */
.mutasi-title{
    font-size:22px;
    font-weight:900;
    letter-spacing:1px;
}
.mutasi-head th{
    font-size:13px;
    font-weight:800;
    letter-spacing:1.5px;
    color:#6b7280;
}
.mutasi-body td{
    font-size:17px;
    font-weight:800;
    padding-top:18px;
    padding-bottom:18px;
}
.mutasi-date{
    color:#6b7280;
    font-weight:800;
}
.mutasi-ket{
    font-weight:900;
    color:#111827;
    letter-spacing:0.3px;
}
.mutasi-masuk{
    font-weight:900;
    color:#10b981;
}
.mutasi-keluar{
    font-weight:900;
    color:#ef4444;
}
.saldo-col {
    font-weight: 900;
    color: #1e40af;
}

/* STYLE EFEK SALJU */
.snowflake {
    color: rgba(255, 255, 255, 0.8);
    font-size: 1.5em;
    position: fixed;
    top: -10%;
    z-index: 9999;
    user-select: none;
    cursor: default;
    pointer-events: none; 
    animation-name: snowflakes-fall, snowflakes-shake;
    animation-duration: 10s, 3s;
    animation-timing-function: linear, ease-in-out;
    animation-iteration-count: infinite, infinite;
    animation-play-state: running, running;
}

@keyframes snowflakes-fall {
    0% { top: -10%; }
    100% { top: 100%; }
}

@keyframes snowflakes-shake {
    0%, 100% { transform: translateX(0) rotate(0deg); }
    50% { transform: translateX(80px) rotate(180deg); }
}

/* MODAL & KEYPAD STYLES */
#pinModal, #inputModal { display: none; }
.keypad-btn {
    background: #f1f5f9;
    font-weight: 800;
    font-size: 1.5rem;
    padding: 1rem;
    border-radius: 1rem;
    transition: all 0.2s;
}
.keypad-btn:active {
    background: #3b82f6;
    color: white;
    transform: scale(0.95);
}
</style>
</head>

<body>

<div class="struktur-wrapper">
<div class="struktur-container">
<h1 style="margin:0;color:#1a2a5a;font-weight:900;font-size:28px;letter-spacing:1px;">STRUKTUR PENGURUS TAKMIR</h1>
<h2 style="margin-top:5px;color:#1a2a5a;font-weight:800;font-size:20px;letter-spacing:1px;">MUSHOLLA WAKAF AN-NUR</h2>

<div class="flex-box">
<div class="box"><strong>Ketua</strong><br>Bp. Purnomo</div>
<div class="box"><strong>Wakil Ketua</strong><br>Bp. Anton</div>
<div class="box"><strong>Penasehat</strong><br>Bp. Mualif<br>Bp. Rokim, Bp. Mukarom<br>Bp. Fafa (Mas Wo)</div>
</div>

<div class="box"><strong>Sekretaris</strong><br>Bp. Sujatmoko</div>
<div class="box"><strong>Wakil Sekretaris</strong><br>Sdri. Nadia</div>

<div class="flex-box">
<div class="box"><strong>Bendahara 1</strong><br>Bp. Budi</div>
<div class="box"><strong>Bendahara 2</strong><br>Ibu Ratna</div>
</div>

<div class="section-row">
<div class="box"><strong>Seksi Keamanan</strong><br>Bp. Heru Prasetyo<br>Bp. Puguh</div>
<div class="box"><strong>Seksi Perawatan</strong><br>Bp. Ipin<br>Bp. Widodo</div>
<div class="box"><strong>Seksi Kegiatan</strong><br>Bp. Yatiran<br>Bp. Kardiyo<br>Ibu Nurul<br>Ibu Sumiaton<br>Sdri. Maya</div>
<div class="box"><strong>Seksi Kebersihan</strong><br>Bp. Dwiyani<br>Bp. Doni<br>Bp. Sutikno</div>
<div class="box"><strong>Seksi Remaja Musholla</strong><br>Sdr. Totok | Sdr. Bilqis<br>Sdr. Ibra | Sdr. Cilo<br>Sdri. Yopi, Sdri. Wulan, Dkk<br></div>
</div>
</div>
</div>

<div class="p-4 md:p-6 lg:p-8">
<div class="max-w-7xl mx-auto space-y-4">

<header class="bg-[#166534] text-white p-6 rounded-[1.5rem] shadow-lg text-center">
<h1 class="font-black text-xl uppercase">MUSHOLLA WAKAF AN-NUR</h1>
<p class="text-xs text-[#4ade80] font-black uppercase tracking-widest">LAPORAN INFAQ DIGITAL SYSTEM</p>
</header>

<div class="gradient-blue p-10 rounded-[2.5rem] text-white text-center shadow-2xl">
<p class="text-xs font-black uppercase tracking-widest">Saldo Infaq Saat Ini</p>
<h2 class="text-5xl font-black tracking-tighter" id="totalBalance">Rp 0</h2>
</div>

<div class="grid grid-cols-1 md:grid-cols-2 gap-4">
<div class="bg-white p-8 rounded-[2rem] border-l-[10px] border-[#10b981] shadow-custom">
<p class="text-xs font-black text-gray-400 uppercase">Total Pemasukan</p>
<p class="text-3xl font-black text-[#10b981]" id="totalIncome">Rp 0</p>
</div>
<div class="bg-white p-8 rounded-[2rem] border-l-[10px] border-[#ef4444] shadow-custom">
<p class="text-xs font-black text-gray-400 uppercase">Total Pengeluaran</p>
<p class="text-3xl font-black text-[#ef4444]" id="totalExpense">Rp 0</p>
</div>
</div>

<div class="bg-white p-10 rounded-[2.5rem] shadow-custom">
<h3 class="mutasi-title text-[#166534] mb-6 uppercase">Laporan Mutasi Infaq</h3>

<div class="overflow-x-auto">
<table class="w-full text-left min-w-[900px]">
<thead class="mutasi-head border-b-4">
<tr>
<th class="pb-4">TGL</th>
<th class="pb-4">KETERANGAN</th>
<th class="pb-4 text-right">MASUK</th>
<th class="pb-4 text-right">KELUAR</th>
<th class="pb-4 text-right">SALDO</th>
</tr>
</thead>
<tbody id="transactionList" class="mutasi-body">
<tr><td class="mutasi-date">23/10/2025</td><td class="mutasi-ket">SALDO INFAQ AWAL</td><td class="text-right mutasi-masuk">Rp 1.000.000</td><td class="text-right">-</td><td class="text-right saldo-col">Rp 0</td></tr>
<tr><td class="mutasi-date">23/11/2025</td><td class="mutasi-ket">HAMBA ALLAH</td><td class="text-right mutasi-masuk">Rp 50.000</td><td class="text-right">-</td><td class="text-right saldo-col">Rp 0</td></tr>
<tr><td class="mutasi-date">23/11/2025</td><td class="mutasi-ket">PEMBELIAN PASIR<br><a href="https://drive.google.com/file/d/1IthM9w13mRrSvpL3dKETfu5ITlqKcmFJ/view?usp=drive_link" target="_blank" class="text-blue-600 underline text-sm">Lihat Foto Nota</a></td><td class="text-right">-</td><td class="text-right mutasi-keluar">Rp 400.000</td><td class="text-right saldo-col">Rp 0</td></tr>
<tr><td class="mutasi-date">23/11/2025</td><td class="mutasi-ket">KONSUMSI MAKAN SIANG<br><a href="https://drive.google.com/file/d/1d_x_Zu0nICw6Pc0PkyLxK3Dl4NLhrDiQ/view?usp=sharing" target="_blank" class="text-blue-600 underline text-sm">Lihat Foto Nota</a></td><td class="text-right">-</td><td class="text-right mutasi-keluar">Rp 90.000</td><td class="text-right saldo-col">Rp 0</td></tr>
<tr><td class="mutasi-date">13/01/2026</td><td class="mutasi-ket">HAMBA ALLAH</td><td class="text-right mutasi-masuk">Rp 150.000</td><td class="text-right">-</td><td class="text-right saldo-col">Rp 0</td></tr>
<tr><td class="mutasi-date">23/01/2026</td><td class="mutasi-ket">KERAMIK 5 DUS<br><a href="https://drive.google.com/file/d/1h23tajt7RTAWBHW6duHjK178CdNHNF-b/view?usp=sharing" target="_blank" class="text-blue-600 underline text-sm">Lihat Foto Nota</a></td><td class="text-right">-</td><td class="text-right mutasi-keluar">Rp 360.000</td><td class="text-right saldo-col">Rp 0</td></tr>
<tr><td class="mutasi-date">26/01/2026</td><td class="mutasi-ket">SEMEN GRESIK<br><a href="https://drive.google.com/file/d/16S825nMMjCsclSQOFvWMOvUYvmGqtJ59/view?usp=drive_link" target="_blank" class="text-blue-600 underline text-sm">Lihat Foto Nota</a></td><td class="text-right">-</td><td class="text-right mutasi-keluar">Rp 58.000</td><td class="text-right saldo-col">Rp 0</td></tr>
<tr><td class="mutasi-date">26/01/2026</td><td class="mutasi-ket">HAMBA ALLAH</td><td class="text-right mutasi-masuk">Rp 50.000</td><td class="text-right">-</td><td class="text-right saldo-col">Rp 0</td></tr>
<tr><td class="mutasi-date">15/02/2026</td><td class="mutasi-ket">CAT & PERLENGKAPAN LAINNYA<br><a href="https://drive.google.com/file/d/124K1C2jaVXzmRqrW77vcWlU74GqkWbP2/view?usp=sharing" target="_blank" class="text-blue-600 underline text-sm">Lihat Foto Nota</a></td><td class="text-right">-</td><td class="text-right mutasi-keluar">Rp 159.000</td><td class="text-right saldo-col">Rp 0</td></tr>
<tr><td class="mutasi-date">17/02/2026</td><td class="mutasi-ket">CETAK BANNER<br><a href="https://drive.google.com/file/d/1BGrYV-76j-EdCn7-aZq6ytaaKxCck3iJ/view?usp=sharing" target="_blank" class="text-blue-600 underline text-sm">Lihat Foto Nota</a></td><td class="text-right">-</td><td class="text-right mutasi-keluar">Rp 89.800</td><td class="text-right saldo-col">Rp 0</td></tr>
<tr><td class="mutasi-date">17/02/2026</td><td class="mutasi-ket">INFAQ MEGENGAN IBU IBU</td><td class="text-right mutasi-masuk">Rp 65.000</td><td class="text-right">-</td><td class="text-right saldo-col">Rp 0</td></tr>
<tr><td class="mutasi-date">17/02/2026</td><td class="mutasi-ket">INFAQ MEGENGAN BAPAK BAPAK</td><td class="text-right mutasi-masuk">Rp 20.000</td><td class="text-right">-</td><td class="text-right saldo-col">Rp 0</td></tr>
</tbody>
</table>
</div>
</div>
</div>
</div>

<button onclick="openPinModal()" class="fixed bottom-8 right-8 bg-[#166534] text-white w-16 h-16 rounded-full shadow-2xl flex items-center justify-center hover:scale-110 transition-transform z-50">
    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M12 4v16m8-8H4" /></svg>
</button>

<div id="pinModal" class="fixed inset-0 bg-black/80 backdrop-blur-md z-[100] items-center justify-center p-4">
    <div class="bg-white w-full max-w-sm rounded-[2.5rem] p-8 text-center shadow-2xl">
        <h3 class="text-xl font-black mb-2">OTORISASI TAKMIR</h3>
        <p class="text-gray-500 text-sm mb-6 font-bold">Masukkan PIN Keamanan</p>
        <div class="flex justify-center gap-3 mb-8">
            <div id="dot-1" class="w-4 h-4 rounded-full border-2 border-gray-300"></div>
            <div id="dot-2" class="w-4 h-4 rounded-full border-2 border-gray-300"></div>
            <div id="dot-3" class="w-4 h-4 rounded-full border-2 border-gray-300"></div>
            <div id="dot-4" class="w-4 h-4 rounded-full border-2 border-gray-300"></div>
            <div id="dot-5" class="w-4 h-4 rounded-full border-2 border-gray-300"></div>
            <div id="dot-6" class="w-4 h-4 rounded-full border-2 border-gray-300"></div>
        </div>
        <div class="grid grid-cols-3 gap-3">
            <button onclick="pressKey('1')" class="keypad-btn">1</button>
            <button onclick="pressKey('2')" class="keypad-btn">2</button>
            <button onclick="pressKey('3')" class="keypad-btn">3</button>
            <button onclick="pressKey('4')" class="keypad-btn">4</button>
            <button onclick="pressKey('5')" class="keypad-btn">5</button>
            <button onclick="pressKey('6')" class="keypad-btn">6</button>
            <button onclick="pressKey('7')" class="keypad-btn">7</button>
            <button onclick="pressKey('8')" class="keypad-btn">8</button>
            <button onclick="pressKey('9')" class="keypad-btn">9</button>
            <button onclick="resetPin()" class="keypad-btn text-red-500 text-sm">HAPUS</button>
            <button onclick="pressKey('0')" class="keypad-btn">0</button>
            <button onclick="closeModals()" class="keypad-btn text-gray-400 text-sm">BATAL</button>
        </div>
    </div>
</div>

<div id="inputModal" class="fixed inset-0 bg-black/80 backdrop-blur-md z-[100] items-center justify-center p-4">
    <div class="bg-white w-full max-w-lg rounded-[2.5rem] p-8 shadow-2xl">
        <h3 class="text-2xl font-black text-[#166534] mb-6 italic uppercase">Input Infaq Baru</h3>
        <div class="space-y-4">
            <div><label class="block text-xs font-black text-gray-400 uppercase mb-1">Tanggal</label><input type="date" id="inpTgl" class="w-full p-4 bg-gray-100 rounded-xl border-none font-bold"></div>
            <div><label class="block text-xs font-black text-gray-400 uppercase mb-1">Keterangan</label><input type="text" id="inpKet" class="w-full p-4 bg-gray-100 rounded-xl border-none font-bold"></div>
            <div class="grid grid-cols-2 gap-4">
                <div><label class="block text-xs font-black text-green-600 uppercase mb-1">Masuk (Rp)</label><input type="number" id="inpMasuk" placeholder="0" class="w-full p-4 bg-green-50 rounded-xl border-none font-bold"></div>
                <div><label class="block text-xs font-black text-red-600 uppercase mb-1">Keluar (Rp)</label><input type="number" id="inpKeluar" placeholder="0" class="w-full p-4 bg-red-50 rounded-xl border-none font-bold"></div>
            </div>
            <div class="pt-4 flex gap-3">
                <button onclick="saveNewData()" class="flex-1 bg-green-600 text-white font-black py-4 rounded-xl shadow-lg">SIMPAN</button>
                <button onclick="closeModals()" class="px-6 py-4 font-bold text-gray-400">BATAL</button>
            </div>
        </div>
    </div>
</div>

<div id="snow-container" aria-hidden="true"></div>

<script>
/* KODE ASLI PERHITUNGAN SALDO */
function parseRupiah(text) { return parseInt(text.replace(/[^0-9]/g, '')) || 0; }
function formatRupiah(num) { return "Rp " + num.toLocaleString("id-ID"); }
function calculateTotals() {
  let totalIncome = 0; let totalExpense = 0; let runningBalance = 0;
  document.querySelectorAll("#transactionList tr").forEach(row => {
    const masukVal = parseRupiah(row.children[2].innerText);
    const keluarVal = parseRupiah(row.children[3].innerText);
    totalIncome += masukVal; totalExpense += keluarVal;
    runningBalance += (masukVal - keluarVal);
    if(row.children[4]) row.children[4].innerText = formatRupiah(runningBalance);
  });
  document.getElementById("totalIncome").innerText = formatRupiah(totalIncome);
  document.getElementById("totalExpense").innerText = formatRupiah(totalExpense);
  document.getElementById("totalBalance").innerText = formatRupiah(totalIncome - totalExpense);
}
calculateTotals();

/* LOGIKA PIN & INPUT */
let enteredPin = "";
const CORRECT_PIN = "333999";
function openPinModal() { enteredPin = ""; updatePinDots(); document.getElementById('pinModal').style.display = 'flex'; }
function closeModals() { document.getElementById('pinModal').style.display = 'none'; document.getElementById('inputModal').style.display = 'none'; }
function pressKey(num) {
    if (enteredPin.length < 6) {
        enteredPin += num; updatePinDots();
        if (enteredPin.length === 6) {
            if (enteredPin === CORRECT_PIN) {
                setTimeout(() => { document.getElementById('pinModal').style.display = 'none'; document.getElementById('inputModal').style.display = 'flex'; }, 200);
            } else { alert("PIN SALAH!"); resetPin(); }
        }
    }
}
function resetPin() { enteredPin = ""; updatePinDots(); }
function updatePinDots() {
    for (let i = 1; i <= 6; i++) {
        const dot = document.getElementById(`dot-${i}`);
        i <= enteredPin.length ? dot.classList.add('bg-blue-600', 'border-blue-600') : dot.classList.remove('bg-blue-600', 'border-blue-600');
    }
}
function saveNewData() {
    const tgl = document.getElementById('inpTgl').value;
    const ket = document.getElementById('inpKet').value.toUpperCase();
    const masuk = document.getElementById('inpMasuk').value || 0;
    const keluar = document.getElementById('inpKeluar').value || 0;
    if (!tgl || !ket) { alert("Isi data dengan lengkap!"); return; }
    const d = new Date(tgl);
    const formattedDate = `${String(d.getDate()).padStart(2, '0')}/${String(d.getMonth() + 1).padStart(2, '0')}/${d.getFullYear()}`;
    const table = document.getElementById('transactionList');
    const row = table.insertRow();
    row.innerHTML = `<td class="mutasi-date">${formattedDate}</td><td class="mutasi-ket">${ket}</td><td class="text-right mutasi-masuk">${masuk > 0 ? formatRupiah(parseInt(masuk)) : '-'}</td><td class="text-right mutasi-keluar">${keluar > 0 ? formatRupiah(parseInt(keluar)) : '-'}</td><td class="text-right saldo-col">Rp 0</td>`;
    calculateTotals(); closeModals();
    document.getElementById('inpKet').value = ""; document.getElementById('inpMasuk').value = ""; document.getElementById('inpKeluar').value = "";
    row.scrollIntoView({ behavior: 'smooth' });
}

/* EFEK SALJU */
function createSnowflake() {
    const snowflakeChars = ['❄', '❅', '❆', '✻', '✽']; 
    const container = document.getElementById('snow-container');
    const flake = document.createElement('div');
    flake.className = 'snowflake';
    flake.innerText = snowflakeChars[Math.floor(Math.random() * snowflakeChars.length)];
    flake.style.left = Math.random() * 100 + 'vw';
    flake.style.fontSize = (Math.random() * 1.5) + 0.5 + 'em';
    flake.style.opacity = Math.random();
    flake.style.animationDuration = ((Math.random() * 8) + 7) + 's, 3s';
    container.appendChild(flake);
    setTimeout(() => { flake.remove(); }, 15000);
}
setInterval(createSnowflake, 400);
</script>

</body>
    </html>
    
